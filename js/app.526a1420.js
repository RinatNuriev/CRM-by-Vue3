(function(){"use strict";var t={6689:function(t,e,r){var n=r(9963),o=r(6252);function a(t,e,r,n,a,i){return(0,o.wg)(),(0,o.j4)((0,o.LL)(i.layout))}const i={class:"grey darken-1 empty-layout"};function s(t,e,r,n,a,s){const c=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(c)])}var c=r(6270),l={computed:{error(){return this.$store.getters.error}},watch:{error(t){this.$error(c.Z[t.code]||"Что-то пошло не так")}}},u=r(3744);const d=(0,u.Z)(l,[["render",s]]);var p=d,m=r(3577);const f={key:1,class:"app-main-layout"},h={class:"app-page"},g={class:"fixed-action-btn"},v=(0,o._)("i",{class:"large material-icons"},"add",-1);function w(t,e,r,n,a,i){const s=(0,o.up)("loader"),c=(0,o.up)("navbar"),l=(0,o.up)("sidebar"),u=(0,o.up)("router-view"),d=(0,o.up)("router-link"),p=(0,o.Q2)("tooltip");return(0,o.wg)(),(0,o.iD)("div",null,[t.loading?((0,o.wg)(),(0,o.j4)(s,{key:0})):((0,o.wg)(),(0,o.iD)("div",f,[(0,o.Wm)(c,{onClicker:e[0]||(e[0]=e=>t.isOpen=!t.isOpen)}),(0,o.Wm)(l,{modelValue:t.isOpen,"onUpdate:modelValue":e[1]||(e[1]=e=>t.isOpen=e)},null,8,["modelValue"]),(0,o._)("main",{class:(0,m.C_)(["app-content",{full:!t.isOpen}])},[(0,o._)("div",h,[(0,o.Wm)(u)])],2),(0,o._)("div",g,[(0,o.wy)(((0,o.wg)(),(0,o.j4)(d,{to:"/record",class:"btn-floating btn-large blue",href:"#"},{default:(0,o.w5)((()=>[v])),_:1})),[[p,"Создать новую запись"]])])]))])}const y={class:"navbar orange lighten-1"},b={class:"nav-wrapper"},k={class:"navbar-left"},_={href:"#"},j={class:"black-text"},E={class:"right hide-on-small-and-down"},U={class:"dropdown-trigger black-text",href:"#","data-target":"dropdown",ref:"dropdown"},C=(0,o._)("i",{class:"material-icons right"},"arrow_drop_down",-1),O={id:"dropdown",class:"dropdown-content"},M=(0,o._)("i",{class:"material-icons"},"account_circle",-1),N=(0,o._)("li",{class:"divider",tabindex:"-1"},null,-1),x=(0,o._)("i",{class:"material-icons"},"assignment_return",-1);function I(t,e,r,a,i,s){const c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("nav",y,[(0,o._)("div",b,[(0,o._)("div",k,[(0,o._)("a",_,[(0,o._)("i",{class:"material-icons black-text",onClick:e[0]||(e[0]=(0,n.iM)((e=>t.$emit("clicker")),["prevent"]))},"dehaze")]),(0,o._)("span",j,(0,m.zw)(t.date),1)]),(0,o._)("ul",E,[(0,o._)("li",null,[(0,o._)("a",U,[(0,o.Uk)((0,m.zw)(s.name)+" ",1),C],512),(0,o._)("ul",O,[(0,o._)("li",null,[(0,o.Wm)(c,{to:"/profile",class:"black-text"},{default:(0,o.w5)((()=>[M,(0,o.Uk)("Профиль ")])),_:1})]),N,(0,o._)("li",null,[(0,o._)("a",{href:"#",class:"black-text",onClick:e[1]||(e[1]=(0,n.iM)(((...t)=>s.logout&&s.logout(...t)),["self","prevent"]))},[x,(0,o.Uk)("Выйти ")])])])])])])])}r(7658);var P=r(3058),S=r.n(P),Z={data:()=>({date:"",interval:null,dropdown:null}),computed:{name(){return this.$store.getters.info.name}},methods:{async logout(){await this.$store.dispatch("logout"),this.$router.push("/login?message=logout")}},mounted(){this.interval=setInterval((()=>{this.date=(new Date).toLocaleTimeString()+" "+(new Date).toLocaleDateString()}),1e3),this.dropdown=S().Dropdown.init(this.$refs.dropdown,{constrainWidth:!0})},beforeUnmount(){clearInterval(this.interval),this.dropdown&&this.dropdown.destroy&&this.dropdown.destroy()}};const $=(0,u.Z)(Z,[["render",I]]);var A=$;const D=["href","onClick"];function T(t,e,r,n,a,i){const s=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("ul",{class:(0,m.C_)(["sidenav app-sidenav",{open:r.modelValue}])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.links,(t=>((0,o.wg)(),(0,o.j4)(s,{key:t.url,"active-class":"active",to:t.url,custom:""},{default:(0,o.w5)((({href:e,navigate:r,isExactActive:n})=>[(0,o._)("li",{class:(0,m.C_)([n&&"active"])},[(0,o._)("a",{href:e,onClick:r,class:"waves-effect waves-orange pointer"},(0,m.zw)(t.title),9,D)],2)])),_:2},1032,["to"])))),128))],2)}var L={data:()=>({links:[{title:"Счет",url:"/",exact:!0},{title:"История",url:"/history"},{title:"Планирование",url:"/planning"},{title:"Новая запись",url:"/record"},{title:"Категории",url:"/categories"}]}),props:["modelValue"]};const V=(0,u.Z)(L,[["render",T]]);var H=V,R=r(4667),z={name:"main-layout",data:()=>({isOpen:!0,loading:!0}),async mounted(){Object.keys(this.$store.getters.info).length||await this.$store.dispatch("fetchInfo"),this.loading=!1},components:{Navbar:A,Sidebar:H,Loader:R.Z},computed:{error(){return this.$store.getters.error}},watch:{error(t){this.$error(c.Z[t.code]||"Что-то пошло не так")}}};const F=(0,u.Z)(z,[["render",w]]);var B=F,W={computed:{layout(){return(this.$route.meta.layout||"Auth")+"-layout"}},components:{AuthLayout:p,MainLayout:B}};const K=(0,u.Z)(W,[["render",a]]);var X=K,Y=r(5205);(0,Y.z)("/CRM-page/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var q=r(2201),Q=r(6502);const G=[{path:"/login",name:"login",meta:{layout:"auth"},component:()=>Promise.all([r.e(217),r.e(90)]).then(r.bind(r,8090))},{path:"/register",name:"register",meta:{layout:"auth"},component:()=>Promise.all([r.e(217),r.e(770)]).then(r.bind(r,3998))},{path:"/",name:"home",meta:{layout:"main",auth:"true"},component:()=>r.e(957).then(r.bind(r,9957))},{path:"/categories",name:"categories",meta:{layout:"main",auth:"true"},component:()=>Promise.all([r.e(217),r.e(985)]).then(r.bind(r,1985))},{path:"/detail/:id",name:"detail",meta:{layout:"main",auth:"true"},component:()=>r.e(150).then(r.bind(r,150))},{path:"/history",name:"history",meta:{layout:"main",auth:"true"},component:()=>r.e(526).then(r.bind(r,8526))},{path:"/planning",name:"planning",meta:{layout:"main",auth:"true"},component:()=>r.e(918).then(r.bind(r,7918))},{path:"/profile",name:"profile",meta:{layout:"main",auth:"true"},component:()=>r.e(467).then(r.bind(r,5467))},{path:"/record",name:"record",meta:{layout:"main",auth:"true"},component:()=>Promise.all([r.e(217),r.e(832)]).then(r.bind(r,832))}],J=(0,q.p7)({history:(0,q.PO)("/CRM-page/"),routes:G});J.beforeEach(((t,e,r)=>{const n=(0,Q.v0)().currentUser,o=t.matched.some((t=>t.meta.auth));o&&!n?r("/login?message=login"):r()}));var tt=J,et=r(3907),rt=r(9355),nt={actions:{async login({dispatch:t,commit:e},{email:r,password:n}){console.log(t);try{const t=(0,Q.v0)();await(0,Q.e5)(t,r,n)}catch(o){throw e("setError",o),o.message}},async register({dispatch:t,commit:e},{email:r,password:n,name:o}){const a=(0,Q.v0)(),i=(0,rt.N8)();try{await(0,Q.Xb)(a,r,n,o);const e=await t("getUid");await(0,rt.t8)((0,rt.iH)(i,"users/"+e+"/info"),{bill:1e4,name:o})}catch(s){throw e("setError",s),s.message}},getUid(){const t=(0,Q.v0)().currentUser;return t?t.uid:null},async logout({commit:t}){await(0,Q.v0)().signOut(),t("clearInfo")}}},ot={state:{info:{}},mutations:{setInfo(t,e){t.info=e},clearInfo(t){t.info={}}},actions:{async unpdateInfo({dispatch:t,commit:e,getters:r},n){const o=(0,rt.N8)();try{const a=await t("getUid"),i={...r.info,...n};await(0,rt.Vx)((0,rt.iH)(o,"users/"+a+"/info"),i),e("setInfo",i)}catch(a){throw e("setError",a),a.message}},async fetchInfo({dispatch:t,commit:e}){const r=(0,rt.N8)();try{const n=await t("getUid"),o=(0,rt.iH)(r,"users/"+n+"/info");(0,rt.jM)(o,(t=>{const r=t.val();e("setInfo",r)}))}catch(n){throw e("setError",n),n.message}}},getters:{info:t=>t.info}},at={actions:{async updateCategory({commit:t,dispatch:e},{title:r,limit:n,id:o}){const a=(0,rt.N8)();try{const t=await e("getUid");return(0,rt.Vx)((0,rt.iU)((0,rt.iH)(a,"users/"+t+"/categoties"),o),{title:r,limit:n})}catch(i){throw t("setError",i),i}},async createCategory({commit:t,dispatch:e},{title:r,limit:n}){const o=(0,rt.N8)();try{const t=await e("getUid"),a=await(0,rt.VF)((0,rt.iH)(o,"users/"+t+"/categoties"),{title:r,limit:n});return{title:r,limit:n,id:a.key}}catch(a){throw t("setError",a),a}},async fetchCategories({commit:t,dispatch:e}){const r=(0,rt.N8)();try{const t=await e("getUid"),n=(0,rt.iH)(r,"users/"+t+"/categoties"),o=[];return(0,rt.jM)(n,(t=>{const e=t.val();o.push(Object.keys(e).map((t=>({...e[t],id:t}))))})),o}catch(n){throw t("setError",n),n}},async fetchCategoryById({commit:t,dispatch:e},r){const n=(0,rt.N8)();try{const t=await e("getUid"),o=(0,rt.iU)((0,rt.iH)(n,"users/"+t+"/categoties"),r),a=[];return(0,rt.jM)(o,(t=>{const e=t.val();a.push({...e,id:r})})),a}catch(o){throw t("setError",o),o}}}},it={actions:{async createRecord({dispatch:t,commit:e},r){const n=(0,rt.N8)();try{const e=await t("getUid");return await(0,rt.VF)((0,rt.iH)(n,"users/"+e+"/records"),r)}catch(o){throw e("setError",o),o}},async fetchRecords({dispatch:t,commit:e}){const r=(0,rt.N8)();try{const e=await t("getUid"),n=(0,rt.iH)(r,"users/"+e+"/records"),o=[];return(0,rt.jM)(n,(t=>{const e=t.val();o.push(Object.keys(e).map((t=>({...e[t],id:t}))))})),o}catch(n){throw e("setError",n),n}},async fetchRecordById({dispatch:t,commit:e},r){const n=(0,rt.N8)();try{const e=await t("getUid"),o=(0,rt.iU)((0,rt.iH)(n,"users/"+e+"/records"),r),a=[];return(0,rt.jM)(o,(t=>{const e=t.val();a.push({...e,id:r})})),a}catch(o){throw e("setError",o),o}}}},st=(0,et.MT)({state:{error:null},mutations:{setError(t,e){t.error=e},clearError(t){t.error=null}},getters:{error:t=>t.error},actions:{async fetchCurrency(){const t="2KLvzFFmVsxSfSPXNX8Rwprb5KtEWnpN";let e=await fetch("https://api.apilayer.com/fixer/latest?base=EUR&symbols=EUR,RUB,USD",{headers:{apikey:t}});return await e.json()}},modules:{auth:nt,info:ot,category:at,record:it}}),ct={install(t){t.config.globalProperties.$message=function(t){S().toast({html:t})},t.config.globalProperties.$error=function(t){S().toast({html:`[Ошибка]: ${t}`})}}},lt=r(2664),ut={beforeMount(t,{value:e}){S().Tooltip.init(t,{html:e,position:"top"})},unmounted(t){const e=S().Tooltip.getInstance(t);e&&e.destroy&&e.destroy()}},dt=r(3977);let pt;(0,dt.ZF)({apiKey:"AIzaSyC815l283TU7-dQB0Av8zFZ-Tzzna7YY64",authDomain:"vue-crm-6f212.firebaseapp.com",projectId:"vue-crm-6f212",storageBucket:"vue-crm-6f212.appspot.com",messagingSenderId:"891210170653",appId:"1:891210170653:web:7d729ed5c7b5aca1f561f4",measurementId:"G-18XVBV2E8M",databaseURL:"https://vue-crm-6f212-default-rtdb.europe-west1.firebasedatabase.app/"}),(0,Q.v0)().onAuthStateChanged((()=>{pt||(pt=(0,n.ri)(X).directive("tooltip",ut).use(ct).component("Loader",R.Z).component("Paginate",lt.Z).use(st).use(tt).mount("#app"))}))},6270:function(t,e){e["Z"]={logout:"Вы вышли из системы",login:"Для начала войдите в систему","auth/user-not-found":"Пользователя с такой почтой не существует","auth/wrong-password":"Неверный пароль","auth/email-already-in-use":"Такой пользователь уже существует"}},4667:function(t,e,r){r.d(e,{Z:function(){return m}});var n=r(6252),o=r(3577);const a={class:"app-loader"},i={class:"preloader-wrapper active"},s=(0,n.uE)('<div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div>',3),c=[s];function l(t,e,r,s,l,u){return(0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("div",i,[(0,n._)("div",{class:(0,o.C_)(["spinner-layer",u.color])},c,2)])])}var u={computed:{color(){const t=["spinner-red-only","spinner-blue-only","spinner-green-only"];return t[Math.floor(3*Math.random())]}}},d=r(3744);const p=(0,d.Z)(u,[["render",l]]);var m=p}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=t,function(){var t=[];r.O=function(e,n,o,a){if(!n){var i=1/0;for(u=0;u<t.length;u++){n=t[u][0],o=t[u][1],a=t[u][2];for(var s=!0,c=0;c<n.length;c++)(!1&a||i>=a)&&Object.keys(r.O).every((function(t){return r.O[t](n[c])}))?n.splice(c--,1):(s=!1,a<i&&(i=a));if(s){t.splice(u--,1);var l=o();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[n,o,a]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce((function(e,n){return r.f[n](t,e),e}),[]))}}(),function(){r.u=function(t){return"js/"+t+"."+{90:"66a084d7",150:"a33228aa",217:"683f034f",467:"dbb9501e",526:"2ded4a8d",770:"50f50a39",832:"f8936f9f",918:"0681a87b",957:"14f96cc1",985:"fbd3d870"}[t]+".js"}}(),function(){r.miniCssF=function(t){}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="vue-crm:";r.l=function(n,o,a,i){if(t[n])t[n].push(o);else{var s,c;if(void 0!==a)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==e+a){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",e+a),s.src=n),t[n]=[o];var p=function(e,r){s.onerror=s.onload=null,clearTimeout(m);var o=t[n];if(delete t[n],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(t){return t(r)})),e)return e(r)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){r.p="/CRM-page/"}(),function(){var t={143:0};r.f.j=function(e,n){var o=r.o(t,e)?t[e]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise((function(r,n){o=t[e]=[r,n]}));n.push(o[2]=a);var i=r.p+r.u(e),s=new Error,c=function(n){if(r.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}};r.l(i,c,"chunk-"+e,e)}},r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,a,i=n[0],s=n[1],c=n[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var u=c(r)}for(e&&e(n);l<i.length;l++)a=i[l],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(u)},n=self["webpackChunkvue_crm"]=self["webpackChunkvue_crm"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(6689)}));n=r.O(n)})();
//# sourceMappingURL=app.526a1420.js.map